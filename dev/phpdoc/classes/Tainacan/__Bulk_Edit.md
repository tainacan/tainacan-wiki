***

# __Bulk_Edit

Bulk_Edit class handles bulk item edition



* Full name: `\Tainacan\__Bulk_Edit`



## Properties


### meta_key



```php
private $meta_key
```






***

### id

The ID of the current bulk edition group.

```php
private string $id
```






***

## Methods


### __construct

Initializes a bulk edit object

```php
public __construct(array $params): mixed
```

This object have an ID that identifies the group of selected items that are to be affected by the changes.

When itialized it adds a postmeta to the posts of these groups so they can be easily fetched as a group in all operations.

The object can be initialized in three different ways:
1. passing an array of Items IDs, using the items_ids params
2. passing a query array, that will be passed to the fetch method of items repository to create the group  (in this case you also need to specify the collection ID)
3. passing an group ID, generated by this class in a previous initialization using one of the methods above.

When initializing using methods 1 or 2, controllers should then call the get_id() method and store it if they want to perform future requests that wil affect this same group of items

Note: if the ID paramater is passed, other paramaters will be ignored.






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$params` | **array** | {<br /><br />Initialization paramaters |




**Throws:**

- [`Exception`](../Exception.md)



***

### add_fields_to_query

Internally used to filter WP_Query and build the INSERT statement.

```php
public add_fields_to_query(mixed $fields, mixed $wp_query): mixed
```

Must be public because it is registered as a filter callback






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$fields` | **mixed** |  |
| `$wp_query` | **mixed** |  |





***

### get_id

Get the current group ID

```php
public get_id(): string
```









**Return Value:**

the group ID




***

### count_posts

return the number of items selected in the current bulk group

```php
public count_posts(): int
```









**Return Value:**

number of items in the group




***

### get_item_id_by_index

Gets the id of the item in a given position inside the group

```php
public get_item_id_by_index(int $index): int|bool
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$index` | **int** | THe position of the index to search for. From 1 to the length of the group |


**Return Value:**

Returns the ID of the item or false if the index is out of range




***

### save_options



```php
public save_options(mixed $value): mixed
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$value` | **mixed** |  |





***

### get_options



```php
public get_options(): mixed
```












***

### _build_select



```php
private _build_select(mixed $fields): mixed
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$fields` | **mixed** |  |





***

### set_status

Sets the status to all items in the current group

```php
public set_status(mixed $value): mixed
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$value` | **mixed** |  |





***

### add_value

Adds a value to a metadatum to all items in the current group
Must be used with a multiple metadatum

```php
public add_value(\Tainacan\Entities\Metadatum $metadatum, mixed $value): mixed
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$value` | **mixed** |  |





***

### set_value

Sets a value to a metadatum to all items in the current group.

```php
public set_value(\Tainacan\Entities\Metadatum $metadatum, mixed $value): mixed
```

If metadatum is multiple, it will delete all values item may have for this metadatum and then add
this value






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$value` | **mixed** |  |





***

### remove_value

Removes one value from a metadatum of all items in current group

```php
public remove_value(\Tainacan\Entities\Metadatum $metadatum, mixed $value): mixed
```

Must be used with multiple metadatum that are not set as required






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$value` | **mixed** |  |





***

### replace_value

Relplaces a value from one metadata with another value in all items in current group

```php
public replace_value(\Tainacan\Entities\Metadatum $metadatum, mixed $new_value, mixed $old_value): mixed
```








**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$new_value` | **mixed** |  |
| `$old_value` | **mixed** |  |





***

### trash_items



```php
public trash_items(): mixed
```












***

### untrash_items



```php
public untrash_items(): mixed
```












***

### delete_items



```php
public delete_items(): mixed
```












***

### _add_value

Adds a value to the current group of items

```php
private _add_value(\Tainacan\Entities\Metadatum $metadatum, mixed $value): mixed
```

This method adds value to the database directly, any check or validation must be done beforehand






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$value` | **mixed** |  |





***

### _remove_value

Removes a value from the current group of items

```php
private _remove_value(\Tainacan\Entities\Metadatum $metadatum, mixed $value): mixed
```

This method removes value from the database directly, any check or validation must be done beforehand






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$value` | **mixed** |  |





***

### _replace_value

Replaces a value in the current group of items

```php
private _replace_value(\Tainacan\Entities\Metadatum $metadatum, mixed $newvalue, mixed $value): mixed
```

This method replaces a value from the database directly, and adds a new value to all itemsm that had the previous value

TODO: Possible refactor: This method is almost identical to the _add_value method and calls the _remove_value at the end. So it is almost
the same thing as calling _add_value() and _remove_value() one after another. The only difference is that it does both checks before doing anything to the DB
and a small change to the insert queries (marked below)






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |
| `$newvalue` | **mixed** |  |
| `$value` | **mixed** |  |





***

### _remove_values

Removes all values of a metadatum from the current group of items

```php
private _remove_values(\Tainacan\Entities\Metadatum $metadatum): mixed
```

This method removes value from the database directly, any check or validation must be done beforehand






**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `$metadatum` | **\Tainacan\Entities\Metadatum** |  |





***


***
> Automatically generated on 2025-09-02
