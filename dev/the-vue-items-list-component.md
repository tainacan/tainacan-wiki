# The Vue Items List Component

Theme developers interested on having a *fully-featured* Items List - including filters, advanced search and view modes - on certain page can make use of the [helper function](/dev/custom-templates#theme-helper-functions) `tainacan_the_faceted_search()`. For example, let us use it in a child theme of [TwentyTwenty](https://wordpress.org/themes/twentytwenty/ ':ignore') to see how an Items list is rendered:

```php
/**
 * /tainacan/archive-items.php
 *
 * Custom implementation of Tainacan collection items list
 */
<?php get_header(); ?>
    // ... Load custom header, if desired, probably displaying a collection banner
    <?php tainacan_the_faceted_search(); ?>
    // .. Load custom footer, if desired
<?php get_footer(); ?>
```

That alone gives us the following once we get into a collection items page:

![Template added to the items list page.](/_assets/images/the-vue-items-list-component-1.png)

Seems to be a lot more than the simple `<main id='tainacan-items-page' $props ></main>` returned at the [end of the Template Tags source code function](https://github.com/tainacan/tainacan/blob/develop/src/classes/theme-helper/template-tags.php#L280 ':ignore'), right? 

> That is because **the items list is a client-side interface, generated by [Vue.js](https://vuejs.org/ ':ignore')** and Javascript code. It takes advantage of most of the code used by the plugin to render the same list on the *admin panel*, to provide a rich faceted search interface. It is also a great demonstration of what can be done consuming [Tainacan JSON API](https://tainacan.org/api-docs/ ':ignore'), as it uses the API for REST calls every time an update is necessary on the component. 

Nevertheless, as you might have noticed, *not everything is perfect*, some css adjustments that might be necessary because of how the parent theme deals with fonts. We explain how to handle this [on a separate page](/dev/customizing-the-items-list.md). For now, let's dive into the details of how this component works.

### The Vue component logic

As a theme developer, you don't need to learn Vue to use this interface, but it is important to see how it works if you want to customize it, especially its css. The diagram below shall help us in this mission:

![The Vue component architecture for the Faceted Search.](/_assets/images/the-vue-items-list-component-2.png)

The [ThemeSearch]() Vue component is a container that holds all the components seen on the figure. It receives "props", which are the information passed to the `main` tag generated by `tainacan_the_faceted_search()`. Those props are essential for rendering the rest:

* The `collection-id` for the collection items list;
* The `term-id` and `taxonomy` for the term items list;
* The `default-view-mode` and the `enabled-view-modes` array to inform to the items list which view modes should be available according to the Collection settings;

Once aware of these variables, the component is built and the EventBus, responsible for managing the URL route and queries, will generate a long list of params and pass them to the page URL. There is numerous information to be loaded in this first moment, from different sources, represented on the diagram by the "Store Modules". To name a few:

* The **filters** of the collection are requested to the API and the result is stored at the Filters Module, which is consulted by the [FiltersItemsList]() component;
* The **metadata** of the collection are requested to the API and the result is stored at the Metadata Module, which is consulted by the parent ThemeSearch component. This information is used in companion to the props to build elements as the "Displayed Metadata Dropdown" and "View Mode". It also informs to the Event But which item metadata should be fetched;
* The **items** themselves are fetch from the API and served as props to the **ItemsList** component, which can be either a Vue component from the plugin or an HTML template registered as [Extra View Mode](/dev/extra-view-modes.md).
* Other information may be also provided to the component via the `tainacan_plugin` global variable available to the plugin. It stores mainly information relative to the user preference if he or she is logged. For example, a user may have set the "number of items per page" to be 96 instead of 12.

All of this is kept in sync with the URL by the EventBus, to guarantee that if a user copies the link and paste it on another browser, everything is loaded properly. The communication of the components is necessary for details such as updating the facets once the item list is reloaded or a filter applied.

